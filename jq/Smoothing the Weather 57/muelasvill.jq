 #jq -r -c -s -f melasvill.jq

def rangeArray(Numbers): 

[.[-Numbers:] as $SetOfNumbers 
| [range(0 ; (Numbers-1) + 1)]
| .[] as $index 
| $SetOfNumbers[$index-1:$index+2]
| if $index != 0 and $SetOfNumbers[$index] != $SetOfNumbers[-1]  
  then $SetOfNumbers[$index-1:$index+2] 
  | add / length | tonumber
  else $SetOfNumbers[$index]
  end] | join(" ");


def main:
  if length < 1 then  empty
  else rangeArray(.[0])  
  end

;
main 

# cat DATA.lst | jq -r -c -s -f muelasvill.jq
# 20.1 34.13333333333333 43.06666666666667 47.13333333333333 
# 47.833333333333336 48.86666666666667 49.5 50.5 53.26666666666667 
# 49.9 44.9 34.93333333333334 30.03333333333333 
# 24.066666666666666 15.333333333333334 10.833333333333334
# 11.133333333333333 13.200000000000001 13.1 5.733333333333334 
# 5.766666666666666 9.200000000000001 18.166666666666668 25.666666666666668
# 31.03333333333333 41.03333333333333 44.633333333333326 48.03333333333333
# 45.36666666666667 45.9 50.866666666666674 51.03333333333333 
# 48.199999999999996 42.06666666666667 41.599999999999994 40.1 35.1 
# 24.133333333333336 18.166666666666668 10.933333333333332 
# 8.833333333333334 6.433333333333334 3.0666666666666664 
# 5.033333333333334 7.666666666666667 15.366666666666667 
# 19.366666666666664 29.666666666666668 34.9 42.233333333333334 
# 43.23333333333333 47.06666666666666 47.4 46.79999999999999 48.4 
# 48.800000000000004 47.666666666666664 43.63333333333333 37.666666666666664 
# 30.166666666666668 23.599999999999998 19.900000000000002 18.73333333333333 
# 17.133333333333333 14.1 12.333333333333334 15.733333333333334 
# 16.366666666666664 17.333333333333332 18.2 22.2 
# 30.066666666666666 29.8 34.86666666666667 39.5 41.666666666666664 
# 44.699999999999996 45.03333333333333 49.29999999999999 
# 47.13333333333333 45.63333333333333 42.4 36.4 30.5 25.86666666666667 
# 23.8 19.933333333333334 13.866666666666665 11.266666666666666 
# 8.366666666666667 10.5 7.433333333333333 9.433333333333334 
# 12.633333333333333 20.433333333333334 24.666666666666668 
# 26.733333333333334 34.766666666666666 40.1 46.333333333333336 
# 42.699999999999996 43.6 44.63333333333333 52.73333333333333 
# 53.06666666666666 50.06666666666666 41.03333333333334 35 
# 29.933333333333334 23.900000000000002 19.233333333333334 
# 15.466666666666669 16.733333333333334 14.799999999999999 
# 12.6 10.566666666666666 8.366666666666667 13.366666666666665 
# 15.866666666666665 24.7 29.066666666666666 34.63333333333333 
# 39.03333333333333 42.96666666666666 48.43333333333334 52.93333333333333 
# 53.333333333333336 48.6 44.166666666666664 42.76666666666667 40.6 
# 36.03333333333333 29.700000000000003 23.96666666666667 18.133333333333333
# 13.800000000000002 11.6 10.733333333333334 8.066666666666666
# 8.566666666666668 10.4 15.533333333333331 19.733333333333334
# 24.733333333333334 29.900000000000002 34.93333333333334 40.900000000000006
# 42.73333333333333 45.79999999999999 46.6 49.633333333333326
# 49.333333333333336 47.36666666666667 42 37.833333333333336
# 35.13333333333333 32.599999999999994 26.566666666666666
# 19.733333333333334 15.5 17.7 15.766666666666666 15.233333333333334
# 15.333333333333334 17.933333333333334 19.033333333333335
# 14.066666666666668 9.8
